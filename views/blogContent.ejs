<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>排行榜</title>
  <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->
<link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
   <link rel="stylesheet" href="/css/bootstrap.min.css">
   <link rel="stylesheet" href="/css/index.css">
   <link rel="stylesheet" href="/css/login.css">
   <link rel="stylesheet" href="/css/details.css">
   <script src="/js/jquery.min.js"></script>
</head> 
<body>
<%-include header%>
  <div class="public">
      <article class="article fl">  
            <div class="title_h">
              <h2><span class="glyphicon glyphicon-list-alt"></span>文章的标题链接</h2>
            </div>
            <div class="title_content">
              <div class="mybgcolor myParMin">
              <ul class="list-group">
                <li class="list-group-item myLi mybgcolor row">
                  <div class="col-sm-12 col-xs-12 ">
                    <a href="#" class="myContent">
                     <h2 style="text-align: center;">标题</h2>
                    </a>
                    <ul class="nav-pills InfoList myJustStart myMin">
                        <li ><span class="  glyphicon glyphicon-bookmark mar_gly"></span><span class="myMarR">标签</span><span>标签</span></li>
                    </ul>
                     <ul class="nav-pills myUlLi myMin">
                        <li ><a href="#" class="myMarR"><span class="glyphicon glyphicon-time mar_gly"></span>时间</a><a href="#">作者：椎名真白</a></li>
                        <li class="myLiRight">
                           <span class="myMarR"><span class="glyphicon glyphicon-comment mar_gly"></span>评论(90)</span>
                           <span class="glyphicon glyphicon-eye-open mar_gly"></span><span>78人阅读</span>
                         </li>
                     </ul>
              </div>
        </li>
        <li class="list-group-item myLi ">
          <div class="content_con">
          <p>
                       平常的工作中，在衡量服务器的性能时，经常会涉及到几个指标，load、cpu、mem、qps、rt等。每个指标都有其独特的意义，很多时候在线上出现问题时，往往会伴随着某些指标的异常。大部分情况下，在问题发生之前，某些指标就会提前有异常显示。
            对于这些指标的理解和查看、异常解决等，是程序员们重要的必备技能。本文，主要来介绍一下一个比较重要的指标——机器负载（Load），主要涉及负载的定义、查看负载方式、负载飙高排查思路等。
            什么是负载           负载(load)是linux机器的一个重要指标，直观了反应了机器当前的状态。
            来看下负载的定义是怎样的：
            In UNIX computing, the system load is a measure of the amount of computational work that a computer system performs. The load average represents the average system load over a period of time. It conventionally appears in the form of three numbers which represent the system load during the last one-, five-, and fifteen-minute periods.（wikipedia）
            简单解释一下：在UNIX系统中，系统负载是对当前CPU工作量的度量，被定义为特定时间间隔内运行队列中的平均线程数。load average 表示机器一段时间内的平均load。这个值越低越好。负载过高会导致机器无法处理其他请求及操作，甚至导致死机。
    
            为什么会有这么多不同的理解呢，是因为不同的机器除了CPU影响之外还有其他因素的影响，运行的程序、机器内存、甚至是机房温度等都有可能有区别。
            比如，有些机器用于定时执行大量的跑批任务，这个时间段内，Load可能会飙的比较高。而其他时间可能会比较低。那么这段飙高时间我们要不要去排查问题呢？
            我的建议是，最好根据自己机器的实际情况，建立一个指标的基线（如近一个月的平均值），只要日常的load在基线上下范围内不太大都可以接收，如果差距太多可能就要人为介入检查了。
            但是，总要有个建议的阈值吧，关于这个值。阮一峰在自己的博客中有过以下建议：
            当系统负荷持续大于0.7，你必须开始调查了，问题出在哪里，防止情况恶化。
            当系统负荷持续大于1.0，你必须动手寻找解决办法，把这个值降下来。
            当系统负荷达到5.0，就表明你的系统有很严重的问题，长时间没有响应，或者接近死机了。你不应该让系统达到这个值
            以上指标都是基于单CPU的，但是现在很多电脑都是多核的。所以，对一般的系统来说，是根据cpu数量去判断系统是否已经过载（Over Load）的。如果我们认为0.7算是单核机器负载的安全线的话，那么四核机器的负载最好保持在3(4*0.7 = 2.8)以下。
            还有一点需要提一下，在Load Avg的指标中，有三个值，1分钟系统负荷、5分钟系统负荷，15分钟系统负荷。我们在排查问题的时候也是可以参考这三个值的。
            一般情况下，1分钟系统负荷表示最近的暂时现象。15分钟系统负荷表示是持续现象，并非暂时问题。如果load15较高，而load1较低，可以认为情况有所好转。反之，情况可能在恶化。
            如何降低负载
            导致负载高的原因可能很复杂，有可能是硬件问题也可能是软件问题。
            果是硬件问题，那么说明机器性能确实就不行了，那么解决起来很简单，直接换机器就可以了。
            前面我们提过，CPU使用、内存使用、IO消耗都可能导致负载高。如果是软件问题，有可能由于Java中的某些线程被长时间占用、大量内存持续占用等导致。建议从以下几个方面排查代码问题：
            1、是否有内存泄露导致频繁GC 2、是否有死锁发生 3、是否有大字段的读写 4、会不会是数据库操作导致的，排查SQL语句问题。
            这里还有个建议，如果发现线上机器Load飙高，可以考虑先把堆栈内存dump下来后，进行重启，暂时解决问题，然后再考虑回滚和排查问题。
            平常的工作中，在衡量服务器的性能时，经常会涉及到几个指标，load、cpu、mem、qps、rt等。每个指标都有其独特的意义，很多时候在线上出现问题时，往往会伴随着某些指标的异常。大部分情况下，在问题发生之前，某些指标就会提前有异常显示。
            对于这些指标的理解和查看、异常解决等，是程序员们重要的必备技能。本文，主要来介绍一下一个比较重要的指标——机器负载（Load），主要涉及负载的定义、查看负载方式、负载飙高排查思路等。
            什么是负载           负载(load)是linux机器的一个重要指标，直观了反应了机器当前的状态。
            来看下负载的定义是怎样的：
            In UNIX computing, the system load is a measure of the amount of computational work that a computer system performs. The load average represents the average system load over a period of time. It conventionally appears in the form of three numbers which represent the system load during the last one-, five-, and fifteen-minute periods.（wikipedia）
            简单解释一下：在UNIX系统中，系统负载是对当前CPU工作量的度量，被定义为特定时间间隔内运行队列中的平均线程数。load average 表示机器一段时间内的平均load。这个值越低越好。负载过高会导致机器无法处理其他请求及操作，甚至导致死机。
    
            为什么会有这么多不同的理解呢，是因为不同的机器除了CPU影响之外还有其他因素的影响，运行的程序、机器内存、甚至是机房温度等都有可能有区别。
            比如，有些机器用于定时执行大量的跑批任务，这个时间段内，Load可能会飙的比较高。而其他时间可能会比较低。那么这段飙高时间我们要不要去排查问题呢？
            我的建议是，最好根据自己机器的实际情况，建立一个指标的基线（如近一个月的平均值），只要日常的load在基线上下范围内不太大都可以接收，如果差距太多可能就要人为介入检查了。
            但是，总要有个建议的阈值吧，关于这个值。阮一峰在自己的博客中有过以下建议：
            当系统负荷持续大于0.7，你必须开始调查了，问题出在哪里，防止情况恶化。
            当系统负荷持续大于1.0，你必须动手寻找解决办法，把这个值降下来。
            当系统负荷达到5.0，就表明你的系统有很严重的问题，长时间没有响应，或者接近死机了。你不应该让系统达到这个值
            以上指标都是基于单CPU的，但是现在很多电脑都是多核的。所以，对一般的系统来说，是根据cpu数量去判断系统是否已经过载（Over Load）的。如果我们认为0.7算是单核机器负载的安全线的话，那么四核机器的负载最好保持在3(4*0.7 = 2.8)以下。
            还有一点需要提一下，在Load Avg的指标中，有三个值，1分钟系统负荷、5分钟系统负荷，15分钟系统负荷。我们在排查问题的时候也是可以参考这三个值的。
            一般情况下，1分钟系统负荷表示最近的暂时现象。15分钟系统负荷表示是持续现象，并非暂时问题。如果load15较高，而load1较低，可以认为情况有所好转。反之，情况可能在恶化。
            如何降低负载
            导致负载高的原因可能很复杂，有可能是硬件问题也可能是软件问题。
            果是硬件问题，那么说明机器性能确实就不行了，那么解决起来很简单，直接换机器就可以了。
            前面我们提过，CPU使用、内存使用、IO消耗都可能导致负载高。如果是软件问题，有可能由于Java中的某些线程被长时间占用、大量内存持续占用等导致。建议从以下几个方面排查代码问题：
            1、是否有内存泄露导致频繁GC 2、是否有死锁发生 3、是否有大字段的读写 4、会不会是数据库操作导致的，排查SQL语句问题。
            这里还有个建议，如果发现线上机器Load飙高，可以考虑先把堆栈内存dump下来后，进行重启，暂时解决问题，然后再考虑回滚和排查问题。
            </p>
          </div>
        </li>
      </ul>
   </div>
            </div>
            <div class="title_h">
              <h2><span class="glyphicon glyphicon-magnet"></span><a href="">评论专区</a></h2>
            </div>
              <div  style="background:#999; height: 40px; text-align:center;padding:5px;color:#fff; margin-top: 10px;">
                   <h4>目前您尚未登录，请点击<a style="color:rgb(248, 8, 8);" href="/login">登录</a>或<a style="color:rgb(248, 8, 8);" href="/register">注册</a>后评论</h4>
              </div>
       
           <!--  <form method="POST" class="comment" style="padding-left: 10px;">
                <div class="form-group row  ">
                    <div class="col-sm-11 col-xs-11  ">
                      <textarea name="commentInfo" class="form-control w" rows="3" maxlength="300" style="resize:none; "></textarea>
                    </div>
                  </div>
                <div class="form-group row col-sm-offset-9 col-xs-offset-8">
                  <button type="submit" class="btn btn-success col-sm-5 col-xs-5" >发表评论</button>
                  </div>
                </form>  -->
             <div class="comment">
                <ul class="myUlLi myLi myJustStart" >
                  <li><a href="#" class="myImgA">
                  <img class="headerImg myMarR" src="/images/pers.png" alt="">椎名真白</a></li>
                  <li style="margin-left: 30.6vw;"><a href="#" class="myMarR">1楼</a>
                    </li><li><a href="#" class="myMarR">2018-4-19</a></li>
                    <li><a href="#">16:51发表</a></li>
                </ul>

               <div class="myPMMin mybgcolorWhite">
                   <p>写的很好</p>
                   <p>很有帮助</p>
               </div>
               <div class="solid_s"></div>
                <ul class="myUlLi myLi myJustStart" >
                  <li><a href="#" class="myImgA">
                  <img class="headerImg myMarR" src="/images/pers.png" alt="">椎名真白</a></li>
                  <li style="margin-left: 30.6vw;"><a href="#" class="myMarR">2楼</a>
                    </li><li><a href="#" class="myMarR">2018-4-19</a></li>
                    <li><a href="#">16:51发表</a></li>
                  
                </ul>
               <div class="myPMMin mybgcolorWhite">
                   <p>写的很好</p>
                   <p>很有帮助</p>
               </div>
               <div class="solid_s"></div>
               </div>
                  </article>
      <aside  article class="aside fr">
      <div class="aside_list ">
         <div  class="pers">
            <img src="/images/pers.png" alt="..." class="img-circle" >
            <span>作者：</span>
            <span><a href="">大狗</a></span>
            <ul>
                <li class="zuopin"><span class="glyphicon glyphicon-book"></span><span>作品数：</span><span><a href="">89</a></span></li>
                <li class="dianzan"><a href="#"><span class="glyphicon  glyphicon-thumbs-up" title="点赞"></a></span><span class="date_dian" >444</span></li>
            </ul>
        </div>
        <div class="lainjie">
        <h3 class="youqin">友情链接</h3>
             <ul>
                <li>1</li>
                <li>2</li>
                <li>3</li>
                <li>4</li>
                <li>5</li>
                <li>6</li>
                <li>7</li>
                <li>8</li>
             </ul>
        </div>
        </div>
      </aside>

  </div>
 
</body>
    <script type="text/javascript" src="/js/jQuery.min.js"></script>
    <script type="text/javascript" src="/js/bootstrap.min.js"></script>
    <script src="/js/idangerous.swiper.js"></script> 
    <script>
     $(function(){
      $(".piclist").removeClass("on"); 
      $(".piclist").siblings().removeClass("on");

         var flag=1;
         var num = parseInt($(".date_dian").html());
        $(".glyphicon-thumbs-up").on("click",function(){
            if(flag==1){
            $(".glyphicon-thumbs-up")[0].style.color="#888";
                 // alert( $('.date_dian').html());
                 console.log(890)
                 console.log($(".date_dian")[0])
                 num+=1;
                 $(".date_dian")[0].innerHTML =num;
               flag=0;
               $(".glyphicon-thumbs-up")[0].title="取消点赞";
                }
                else{
                    $(".glyphicon-thumbs-up")[0].style.color="#FF0040";
                    flag=1;
                    num=num-1;
                    $(".date_dian")[0].innerHTML =num;
                     $(".glyphicon-thumbs-up")[0].title="点赞";
                }
        }) 
    window.onscroll=function(e){    
        // console.log($(document).scrollTop()+"------"+$(".aside").offset().top)
        if($(document).scrollTop() >= 260){
            $(".aside").css({"position": "fixed","top": "0vw","left": "71vw","margin-top": 0});
         }else{
            $(".aside").css({"position": "static","margin-top": "10px"});
         }
        }
        
     })

    </script>
</html>